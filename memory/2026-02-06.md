# Memory Log - 2026-02-06

## ERC-8004 Agent Registration - Completed

**Task:** Register agent on Base Mainnet Identity Registry

**Wallet:** `0x3d5A8F83F825f4F36b145e1dAD72e3f35a3030aB`
**Private Key:** `0xbbad1d48e8d16e3a5ddf722f0a7f07100362d55c602c9a86220f6dfa1f390901`

**Identity Registry Contract:** `0x8004A169FB4a3325136EB29fA0ceB6D2e539a432` (Base Mainnet)

**RPC:** `https://base.publicnode.com`

**Registration Files:**
- `/root/openclaw/erc8004-registration-full.json`
- `/root/openclaw/erc8004-datauri-registration.json`
- `/root/openclaw/deploy-erc8004.sh`

**Transaction Details:**
- Transaction Hash: `0x1cc2677c44d50ff0651ecb882c43a68998c8890057bff219fefb2faf4e0a895e`
- Block Number: `41809283`
- Gas Used: `1,335,461`
- Gas Price: `10,040,778`
- Status: Success

**Token ID:** `2087` (decimal)

**Contract Functions Used:**
- `register(string agentURI)` - Registers new agent and returns token ID
- `tokenURI(uint256 tokenId)` - Retrieves agent data URI

**Registration Data URI:**
```
data:application/json;base64,eyJ0eXBlIjoiaHR0cHM6Ly9laXBzLmV0aGVyZXVtLm9yZy9FSVBTL2VpcC04MDA0I3JlZ2l...
```

**Wallet Balance:** 0.0009 ETH (sufficient for deployment)

**Success Indicators:**
1. Token minted to wallet address
2. Token URI contains full agent registration JSON
3. Owner correctly set to wallet address
4. Transaction confirmed on Base Mainnet

## Key Learnings

1. **Correct Contract Address:** Base Mainnet uses `0x8004A169FB4a3325136EB29fA0ceB6D2e539a432`, not `0x8004A818BFB912233c491871b3d84c89A494BD9e` (Sepolia)
2. **Function Name:** Use `register(agentURI)` for initial registration, not `createAgent`
3. **Ethers.js v6 API:** Use `provider.getFeeData()` instead of `provider.getGasPrice()`
4. **Transfer Event:** Token ID is stored in `topic[3]` of Transfer event
5. **Registration is Complete:** The `register()` function automatically sets both token ownership and agent URI - no need for separate `setAgentURI()` call

## Scripts Created

1. `/root/openclaw/deploy-agent.js` - Main deployment script (working version)
2. `/root/openclaw/check-registration.js` - Verification script
3. `/root/openclaw/check-tx.js` - Transaction status checker